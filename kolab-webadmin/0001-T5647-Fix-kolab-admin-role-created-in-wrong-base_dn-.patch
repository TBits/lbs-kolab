From ea2522021505627c7955b7cafe939799ef429086 Mon Sep 17 00:00:00 2001
From: Aleksander Machniak <machniak@kolabsys.com>
Date: Fri, 8 Nov 2019 07:50:18 +0000
Subject: [PATCH 1/3] T5647: Fix kolab-admin role created in wrong base_dn for
 hosted domains

---
 lib/kolab_api_service.php | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/lib/kolab_api_service.php b/lib/kolab_api_service.php
index c098de1..6390b3c 100644
--- a/lib/kolab_api_service.php
+++ b/lib/kolab_api_service.php
@@ -415,8 +415,8 @@ abstract class kolab_api_service
             }
         }
 
-        // OU's parent attribute
-        if ($object_name == 'ou' && !empty($attribs['base_dn'])) {
+        // Support base_dn attribute
+        if ($object_name != 'domain' && !empty($attribs['base_dn'])) {
             // @TODO: validate?
             $result['base_dn'] = $attribs['base_dn'];
         }
-- 
2.20.1

