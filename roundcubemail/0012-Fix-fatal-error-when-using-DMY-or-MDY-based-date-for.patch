From 0f24470c5baf8005481ab4cd7278c8e64346d5af Mon Sep 17 00:00:00 2001
From: Aleksander Machniak <alec@alec.pl>
Date: Wed, 28 Jun 2017 08:34:43 +0200
Subject: [PATCH 12/14] Fix fatal error when using DMY- or MDY-based date
 format in PostgreSQL (#5808)

---
 CHANGELOG                                | 1 +
 program/lib/Roundcube/rcube_db_pgsql.php | 3 ++-
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/CHANGELOG b/CHANGELOG
index e3eecde3a..655026a84 100644
--- a/CHANGELOG
+++ b/CHANGELOG
@@ -8,6 +8,7 @@ CHANGELOG Roundcube Webmail
 - Fix style issue on selected and unfocused message that is part of a thread (#5798)
 - Fix bug where a.button style from managesieve plugin could impact other elements (#5800)
 - Fix position of selected icon for (Mailvelope) Encrypt button
+- Fix fatal error when using DMY- or MDY-based date format in PostgreSQL (#5808)
 
 RELEASE 1.3.0
 -------------
diff --git a/program/lib/Roundcube/rcube_db_pgsql.php b/program/lib/Roundcube/rcube_db_pgsql.php
index d0d707a4a..e0ed46c84 100644
--- a/program/lib/Roundcube/rcube_db_pgsql.php
+++ b/program/lib/Roundcube/rcube_db_pgsql.php
@@ -3,7 +3,7 @@
 /**
  +-----------------------------------------------------------------------+
  | This file is part of the Roundcube Webmail client                     |
- | Copyright (C) 2005-2012, The Roundcube Dev Team                       |
+ | Copyright (C) 2005-2017, The Roundcube Dev Team                       |
  |                                                                       |
  | Licensed under the GNU General Public License version 3 or            |
  | any later version with exceptions for skins & plugins.                |
@@ -52,6 +52,7 @@ class rcube_db_pgsql extends rcube_db
     protected function conn_configure($dsn, $dbh)
     {
         $dbh->query("SET NAMES 'utf8'");
+        $dbh->query("SET DATESTYLE TO ISO");
     }
 
     /**
-- 
2.13.0

