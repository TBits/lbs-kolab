From 3b4eb4e097c1252a59945da87efeb65b45bdb4ff Mon Sep 17 00:00:00 2001
From: "Jeroen van Meeuwen (Kolab Systems)" <vanmeeuwen@kolabsys.com>
Date: Mon, 18 May 2015 11:49:37 +0200
Subject: [PATCH 6/7] Remove any traces of long-time obsolete escript:foldl/3

---
 src/rebar_utils.erl | 7 +------
 1 file changed, 1 insertion(+), 6 deletions(-)

diff --git a/src/rebar_utils.erl b/src/rebar_utils.erl
index f3a082d..6bbf6d1 100644
--- a/src/rebar_utils.erl
+++ b/src/rebar_utils.erl
@@ -190,12 +190,7 @@ abort(String, Args) ->
 %% undocumented exported fun and has been removed in R14.
 escript_foldl(Fun, Acc, File) ->
     {module, zip} = code:ensure_loaded(zip),
-    case erlang:function_exported(zip, foldl, 3) of
-        true ->
-            emulate_escript_foldl(Fun, Acc, File);
-        false ->
-            escript:foldl(Fun, Acc, File)
-    end.
+    emulate_escript_foldl(Fun, Acc, File).
 
 find_executable(Name) ->
     case os:find_executable(Name) of
-- 
2.1.0

