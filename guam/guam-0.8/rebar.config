%% -*- tab-width: 4;erlang-indent-level: 4;indent-tabs-mode: nil -*-
%% ex: ft=erlang ts=4 sw=4 et

{ deps_dir, "deps" }.
{ deps, [
    { lager, "(2.0|2.1|2.2).*", { git, "git://github.com/basho/lager.git", { tag, "2.2.0" } } },
    { lager_syslog, "2.*", { git, "git://github.com/basho/lager_syslog.git", { tag, "2.1.3" } } },
    { eimap, ".*", { git, "https://git.kolab.org/diffusion/EI/eimap.git", { tag, "0.2.2" } } }
    %% pull in the proper version of meck before jobs 0.3 gets around to pulling in the wrong version
   ]
}.

{ erl_opts, [ %%no_debug_info,
            {parse_transform, lager_transform},
            {platform_define, "(linux|solaris|freebsd|darwin)", 'HAVE_SENDFILE'}
            ]
}.
{ sub_dirs, [
    "apps/kolab_guam",
    "rel"
 ]}.
{ erl_first_files, ["apps/kolab_guam/src/kolab_guam_rule.erl"] }.
{ erl_opts, [debug_info, fail_on_warning] }.
{ eunit_opts, [verbose, {skip_deps, true }] }.
{ eunit_exclude_deps, true }.
{ cover_enabled, true }.

%%{require_otp_vsn, "17"}.
{ pre_hooks, [ { clean, "rm -fr ebin priv erl_crash.dump" } ] }.

