From dd1d166dbb298ff3f5f0e49cf967eefcddf05ba5 Mon Sep 17 00:00:00 2001
From: Aleksander Machniak <machniak@kolabsys.com>
Date: Mon, 18 Mar 2019 10:03:11 +0100
Subject: [PATCH 1/2] Mark readonly/virtual entries in folder selector as
 disabled

---
 public_html/js/files_api.js | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/public_html/js/files_api.js b/public_html/js/files_api.js
index 823838c..5bc77d3 100644
--- a/public_html/js/files_api.js
+++ b/public_html/js/files_api.js
@@ -214,7 +214,7 @@ function files_api()
       options.push($('<option>').val('').text('---'));
 
     $.each(this.env.folders, function(i, f) {
-      var n, name = escapeHTML(f.name);
+      var n, disabled = false, name = escapeHTML(f.name);
 
       // skip read-only folders
       if (params && params.writable && (f.readonly || f.virtual)) {
@@ -233,12 +233,14 @@ function files_api()
 
         if (!found)
           return;
+
+        disabled = true;
       }
 
       for (n=0; n<f.depth; n++)
         name = '&nbsp;&nbsp;&nbsp;' + name;
 
-      options.push($('<option>').val(i).html(name));
+      options.push($('<option>').val(i).html(name).attr('disabled', disabled));
     });
 
     select.empty().append(options);
-- 
2.20.1

