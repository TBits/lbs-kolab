From 37e5834172adeabab3aae4352de594c98556d309 Mon Sep 17 00:00:00 2001
From: Oleg Smirnov <oleg.smirnov@gmail.com>
Date: Tue, 10 Apr 2012 19:00:13 +0300
Subject: [PATCH 1/3] Fix OTP R15B compatibility issue (re:run instead of
 regexp:match).

---
 priv/generator/generator.erl |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/priv/generator/generator.erl b/priv/generator/generator.erl
index 4956606..46ba752 100644
--- a/priv/generator/generator.erl
+++ b/priv/generator/generator.erl
@@ -90,7 +90,7 @@ get_ix_http(Doc) ->
 
 doc_links(Root,S)-> 
     RE = "href=\"[A-Za-z-]+.html#id[0-9]+\">[a-z_]+ \\(\\)</a>",
-    {match,Ms} = regexp:matches(S,RE),
+    {match,Ms} = re:run(S,RE),
     io:fwrite("got ~p links for ~s~n",[length(Ms),basename(dirname(Root))]),
     foreach(fun({St,Le})-> do_doc_link(Root,string:substr(S,St,Le)) end, Ms).
 
@@ -402,9 +402,9 @@ structs(StructsFile) ->
     Structs = bio:string(StructsFile, fun do_structs/2, []),
     foreach(fun ins_struct/1, Structs).
 do_structs(Str, Acc) ->
-    case regexp:match(Str,"gn_construct_.*\\(") of
+    case re:run(Str,"gn_construct_.*\\(") of
 	nomatch -> Acc;
-	{match,St,Le} -> [string:substr(Str,St+13,Le-14)|Acc]
+	{match,[{St,Le}]} -> [string:substr(Str,St+13,Le-14)|Acc]
     end.
 ins_struct(S) -> ets:insert(types,#type{what=struct,cname=S,cast=""}).
     
-- 
1.7.10.2

